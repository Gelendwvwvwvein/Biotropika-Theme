(()=>{"use strict";const t=window.wp.blocks,e=window.wp.i18n,i=window.wp.blockEditor,n=window.wp.components,o=window.ReactJSXRuntime;function l({level:t=2,children:e,...i}){const n=`h${Math.min(6,Math.max(1,t))}`;return(0,o.jsx)(n,{...i,children:e})}function s({children:t}){return(0,o.jsx)("p",{className:"biotropika-paragraph",children:t})}function r({children:t,href:e,...i}){return(0,o.jsx)("a",{className:"biotropika-btn",href:e,...i,children:t})}function a({children:t,className:e="",...i}){return(0,o.jsx)("div",{className:`biotropika-card ${e}`,...i,children:t})}(0,t.registerBlockType)("biotropika/horizontal-blocks",{edit:function({attributes:t,setAttributes:l}){const{items:s}=t,r=(0,i.useBlockProps)(),a=(t,e,i)=>{const n=s.slice();n[t][e]=i,l({items:n})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.InspectorControls,{children:(0,o.jsxs)(n.PanelBody,{title:(0,e.__)("Горизонтальные блоки","biotropika"),initialOpen:!0,children:[s.map((t,i)=>(0,o.jsxs)(n.PanelBody,{title:`${(0,e.__)("Блок","biotropika")} ${i+1}`,initialOpen:!1,children:[(0,o.jsx)(n.TextControl,{label:(0,e.__)("Заголовок","biotropika"),value:t.title,onChange:t=>a(i,"title",t)}),(0,o.jsx)(n.TextControl,{label:(0,e.__)("Текст блока","biotropika"),value:t.text,onChange:t=>a(i,"text",t)}),(0,o.jsx)(n.TextControl,{label:(0,e.__)("Текст кнопки","biotropika"),value:t.buttonText,onChange:t=>a(i,"buttonText",t)}),(0,o.jsx)(n.TextControl,{label:(0,e.__)("Ссылка кнопки","biotropika"),value:t.buttonLink,onChange:t=>a(i,"buttonLink",t)}),(0,o.jsx)(n.PanelRow,{children:(0,o.jsx)(n.Button,{isLink:!0,isDestructive:!0,onClick:()=>(t=>{const e=s.slice();e.splice(t,1),l({items:e})})(i),children:(0,e.__)("Удалить блок","biotropika")})})]},i)),(0,o.jsx)(n.PanelRow,{children:(0,o.jsx)(n.Button,{isPrimary:!0,onClick:()=>{s.length>=3||l({items:[...s,{title:"",text:"",buttonText:"",buttonLink:""}]})},disabled:s.length>=3,children:(0,e.__)("Добавить блок","biotropika")})})]})}),(0,o.jsx)("div",{...r,children:s.length>0?s.map((t,i)=>(0,o.jsxs)("div",{className:"horizontal-blocks__preview",children:[(0,o.jsx)("strong",{children:t.title||(0,e.__)("(заголовок пустой)","biotropika")}),t.text&&(0,o.jsx)("p",{className:"horizontal-blocks__text-preview",children:t.text}),(0,o.jsx)("em",{children:t.buttonText?`${t.buttonText} → ${t.buttonLink}`:(0,e.__)("(кнопка не задана)","biotropika")})]},i)):(0,o.jsx)("p",{children:(0,e.__)("Добавьте блоки в боковой панели","biotropika")})})]})},save({attributes:t}){const{items:e}=t;return(0,o.jsx)("div",{className:"biotropika-horizontal-blocks",children:e.map((t,e)=>(0,o.jsxs)(a,{className:"horizontal-blocks__item",children:[t.title&&(0,o.jsx)(l,{level:3,className:"horizontal-blocks__title",children:t.title}),t.text&&(0,o.jsx)(s,{className:"horizontal-blocks__text",children:t.text}),t.buttonText&&t.buttonLink&&(0,o.jsx)(r,{className:"horizontal-blocks__button",href:t.buttonLink,children:t.buttonText})]},e))})}})})();